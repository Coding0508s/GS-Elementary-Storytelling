# Twilio SMS 서비스 설정 가이드

## 개요
이 프로젝트는 Twilio SMS 서비스를 사용하여 비디오 업로드 완료 시 학부모님께 SMS 알림을 발송하는 기능을 제공합니다.

## Twilio 계정 설정

### 1. Twilio 계정 생성
1. [Twilio 웹사이트](https://www.twilio.com/)에 접속
2. 무료 계정 가입 (신용카드 정보 필요)
3. 계정 생성 후 대시보드에서 다음 정보 확인:
   - Account SID
   - Auth Token
   - Twilio 전화번호 (무료 계정의 경우 제공됨)

### 2. 환경변수 설정
`.env` 파일에 다음 정보를 추가하세요:

```env
# Twilio SMS Service Configuration
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_FROM_NUMBER=your_twilio_phone_number_here
```

### 3. Twilio 전화번호 확인
- 무료 계정의 경우 Twilio에서 제공하는 전화번호 사용
- 유료 계정의 경우 한국 전화번호 구매 가능
- 전화번호 형식: `+1234567890` (국제 형식)

## SMS 메시지 형식

업로드 완료 시 발송되는 SMS 메시지 예시:

```
[Grape Seed 영어 말하기 대회]

안녕하세요, 김철수님!

김영희님의 영어 말하기 대회 영상이 성공적으로 업로드되었습니다.

📋 업로드 정보
• 기관: GS 영어학원
• 반: A반
• 단원: Unit 5 - My Family
• 업로드 시간: 2025년 1월 15일 14:30

심사 결과는 추후 개별 연락드리겠습니다.
감사합니다! 🎉
```

## 기능 설명

### 1. 자동 SMS 발송
- 비디오 업로드 완료 시 자동으로 SMS 발송
- 학부모님께 업로드 정보 및 진행 상황 안내

### 2. 전화번호 형식 변환
- 한국 전화번호 형식 (010-1234-5678)을 Twilio 형식 (+8210-1234-5678)으로 자동 변환
- 다양한 전화번호 형식 지원

### 3. 오류 처리
- SMS 발송 실패 시 로그 기록
- 업로드 프로세스는 SMS 실패와 관계없이 완료

## 테스트 방법

### 1. 로컬 테스트
```bash
# 개발 서버 실행
php artisan serve --port=8080

# 업로드 폼 접속
http://localhost:8080/upload
```

### 2. SMS 발송 테스트
1. 실제 전화번호로 테스트 업로드
2. SMS 수신 확인
3. 로그 파일에서 발송 상태 확인

## 비용 정보

### Twilio 무료 계정
- 월 1,000건의 SMS 무료
- 제한된 전화번호 사용
- 개발 및 테스트용으로 적합

### Twilio 유료 계정
- SMS당 약 $0.0075 (한국 발송)
- 한국 전화번호 구매 가능
- 대량 발송 시 할인 적용

## 주의사항

1. **개인정보 보호**: 전화번호는 SMS 발송 목적으로만 사용
2. **발송 제한**: 무료 계정의 경우 월 1,000건 제한
3. **국제 발송**: 한국 전화번호로 발송 시 추가 비용 발생 가능
4. **스팸 방지**: 과도한 발송으로 인한 스팸 차단 주의

## 문제 해결

### SMS 발송 실패 시
1. Twilio 계정 정보 확인
2. 전화번호 형식 확인
3. 계정 잔액 확인 (유료 계정)
4. 로그 파일 확인: `storage/logs/laravel.log`

### 로그 확인
```bash
# 최근 로그 확인
tail -f storage/logs/laravel.log | grep "SMS"
```

## 추가 기능

향후 추가 가능한 기능:
- SMS 발송 상태 추적
- 재발송 기능
- 템플릿 메시지 관리
- 발송 통계 대시보드
